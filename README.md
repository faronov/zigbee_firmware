Прошивки для различных Zigbee устройств.

## Обновление по воздуху (OTA)

### Через z2m 

1. Для Z2M указать новый путь к индексному файлу: https://raw.githubusercontent.com/re-engr/zigbee_firmware/main/z2m_index_reengr.json  
![Указать путь к файлу index.json](/images/ota_index.png)  

2. Добавить строку `ota: ota.zigbeeOTA,` в конвертер для сенсора https://github.com/Koenkk/zigbee-herdsman-converters/blob/master/devices/xiaomi.js#L1518
![Модифицировать конвертер для сенсора](/images/ota_lib.png)

3. Перезапустить zigbee2mqtt: `systemctl restart zigbee2mqtt`

4. Подключить/переподключить сенсор к координатору

5. Перейти в раздел OTA, нажать `Check for new updates` для обновляемого сенсора
![Проверить обновление](/images/check_for_new_updates.png)

6. Доступно обновление. Нажать `Update device firmware` 
![Есть обновление](/images/update_device_firmware.png)

7. Разбудить сенсор кнопкой или магнитом. Повторить это несколько раз с периодом 1 сек пока не начнется передача новой прошивки
![Начало обновления](/images/remaining_time_na.png)

8. Через некоторое время отобразится прогресс и оставшееся время. В среднем передача занимает 20 минут
![В процессе](/images/1641.png)

9. После загрузки прошивки устройство перезапуститься  
10. По какой-то причине z2m, для отображения, берет версию ПО из атрибута 0x4000. Значение этого атрибута для версии 100 и 101 одинаковое. Ориентироваться можно по дате сборки прошивки. 
11. Для доступа z2m к оригинальному репозиторию с прошивками, удалите путь к файлу из пункта 1. Возможно понадобится перезапустить z2m

